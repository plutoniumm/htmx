

#-# index.html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>HTMX / Dream (same-thing)</title>

  <script src="https://htmx.org/js/htmx.js"></script>
  <link rel="stylesheet" href="/assets/global.css">
</head>

<body>
  <div class="card">
    <img class="wbg" src="/assets/logo.svg" height="150px" width="150px" alt="htmx logo">
    <div>
      <h4 style="margin: 0;">htmx / skill-issue (same thing)</h4>
      <p style="margin-bottom: 0;">htmx is a javascript library that allows you to access AJAX, WebSockets and Server
        Sent Events directly in
        HTML, using attributes</p>

      <br />
      <button hx-get="/details" hx-swap="innerHTML" hx-target="#details"
        style="border-radius: 5px;background:#47d;color:#fff;border:0;padding: 7px;">Read
        More</button>
    </div>
  </div>

  <div id="details" style="width: min(600px, 100%);margin: 10px auto;"></div>
</body>

</html>

#-# dune
(executable
 (name htmx)
 (libraries dream))

(rule
 (targets htmx.ml)
 (deps htmx.eml.ml)
 (action
  (run dream_eml %{deps} --workspace %{workspace_root})))


#-# htmx.opam
opam-version: "2.0"

depends: [
  "ocaml" {>= "4.08.0"}
  "dream"
  "dune" {>= "2.0.0"}
]


#-# README.md
# Ocamlmycaml

- opam install --deps-only --yes .
- dune exec --root . ./htmx.exe

#-# htmx.eml.ml
let data = [|
  ("Ocaml", "https://ocaml.org/docs", "https://ocaml.org/img/learn/dark-hero-camel.svg");
  ("HTMX", "https://htmx.org/docs", "https://htmx.org/img/htmx_logo.2.png");
  ("Dream", "https://aantron.github.io/dream/", "https://opengraph.githubassets.com/4be9b09c57fb4bcf499d93e65c67b13d4b48e9286353e1b005d5b9496d064758/aantron/dream")
|];;

let ul data =
  <ul>
%   data |> Array.iter begin fun (name, url, img) ->
    <li>
      <img src="<%s img %>" width="100" height="100">
      <a href="<%s url %>"><%s name %></a>
    </li>
%   end;
  </ul>

let () =
  Dream.run?port:(Some 3000)
    @@ Dream.router [
    Dream.get "/assets/**" @@ Dream.static "./assets";
    Dream.get "/" (Dream.from_filesystem "." "index.html");
    Dream.get "/details" (fun _ -> Dream.html (ul data));
  ];;


#-# assets/global.css
body {
  font: 300 18px Helvetica;
}

.card {
  width: min(600px, calc(100% - 20px));
  background: linear-gradient(90deg, #ccc 0%, #eee 100%);
  display: flex;
  border-radius: 10px;
  padding: 15px;
  margin: 10px auto;
}

.wbg {
  background: #fff;
  border-radius: 10px;
  margin-right: 12px;
}

ul {
  list-style: none;
  padding: 0;
  display: flex;
  justify-content: space-around;
}

li {
  margin: 5px;
  padding: 7px;
  border-radius: 5px;
  display: flex;
  flex-direction: column;
  text-align: center;
  justify-content: space-between
}

li img {
  width: 100px;
  height: 100px;
  margin-bottom: 7px;
  border-radius: 50px;
}

#-# assets/logo.svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 171 159.9" font-size="75" font-family="Helvetica">
  <path fill="#47d" d="m 112 77 m -81 -59.1 v 110.6 h 122 v -110.5 z m 117.3 105.9 h -112.5 v -101.2 h 112.5 z m -125.7 13.1 v -110.7 l -4.7 4.8 v 110.7 h 122 l 4.8 -4.8 z"/>
  <text fill="#888" x="37.5" y="95">&lt; &gt;</text>
  <text fill="#47d" x="81.5" y="101">/</text>
</svg>